!function(){"use strict";var e,t={85843:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=a(n(73609));function i(e,t){if(t){var n=URLify(e,255,window.unicodeSlugsEnabled);if(n)return n}return window.unicodeSlugsEnabled?e.replace(/\s/g,"-").replace(/[&/\\#,+()$~%.'":`@^!*?<>{}]/g,"").toLowerCase():e.replace(/\s/g,"-").replace(/[^A-Za-z0-9\-_]/g,"").toLowerCase()}function l(){var e=!1;o.default("#id_title").on("focus",(function(){var t=o.default("#id_slug").val(),n=i(this.value,!0);e=t===n})),o.default("#id_title").on("keyup keydown keypress blur",(function(){if(e){var t=i(this.value,!0);o.default("#id_slug").val(t)}}))}function r(){o.default("#id_slug").on("blur",(function(){o.default(this).val(i(o.default(this).val(),!1))}))}function d(){var e={};for(var t in o.default(".error-message").each((function(){var t=o.default(this).closest("section");e[t.attr("id")]||(e[t.attr("id")]=0),e[t.attr("id")]=e[t.attr("id")]+1})),e)o.default('.tab-nav a[href="#'+t+'"]').addClass("errors").attr("data-count",e[t])}function s(){o.default(".object.multi-field.collapsible").each((function(){var e=o.default(this),t=e.find("fieldset");e.hasClass("collapsed")&&0===e.find(".error-message").length&&t.hide(),e.find("> .title-wrapper").on("click",(function(){e.hasClass("collapsed")?(e.removeClass("collapsed"),t.show("show")):(e.addClass("collapsed"),t.hide("slow"))}))}))}function u(){Mousetrap.bind(["mod+p"],(function(){return o.default(".action-preview").trigger("click"),!1})),Mousetrap.bind(["mod+s"],(function(){return o.default(".action-save").trigger("click"),!1}))}window.halloPlugins={},window.registerHalloPlugin=function(e,t){},window.InlinePanel=function(e){var t={setHasContent:function(){o.default("> li",t.formsUl).not(".deleted").length?t.formsUl.parent().removeClass("empty"):t.formsUl.parent().addClass("empty")},initChildControls:function(n){var a="inline_child_"+n,i="id_"+n+"-DELETE";t.setHasContent(),o.default("#"+i+"-button").on("click",(function(){o.default("#"+i).val("1"),o.default("#"+a).addClass("deleted").slideUp((function(){t.updateMoveButtonDisabledStates(),t.updateAddButtonState(),t.setHasContent()}))})),e.canOrder&&(o.default("#"+n+"-move-up").on("click",(function(){var e=o.default("#"+a),n=e.children('input[name$="-ORDER"]'),i=n.val(),l=e.prevAll(":not(.deleted)").first();if(l.length){var r=l.children('input[name$="-ORDER"]'),d=r.val();t.animateSwap(e,l),e.insertBefore(l),n.val(d),r.val(i),t.updateMoveButtonDisabledStates()}})),o.default("#"+n+"-move-down").on("click",(function(){var e=o.default("#"+a),n=e.children('input[name$="-ORDER"]'),i=n.val(),l=e.nextAll(":not(.deleted)").first();if(l.length){var r=l.children('input[name$="-ORDER"]'),d=r.val();t.animateSwap(e,l),e.insertAfter(l),n.val(d),r.val(i),t.updateMoveButtonDisabledStates()}}))),"1"===o.default("#"+i).val()&&(o.default("#"+a).addClass("deleted").hide(0,(function(){t.updateMoveButtonDisabledStates(),t.updateAddButtonState(),t.setHasContent()})),o.default("#"+a).find(".error-message").remove())}};return t.formsUl=o.default("#"+e.formsetPrefix+"-FORMS"),t.updateMoveButtonDisabledStates=function(){if(e.canOrder){var n=t.formsUl.children("li:not(.deleted)");n.each((function(e){o.default("ul.controls .inline-child-move-up",this).toggleClass("disabled",0===e).toggleClass("enabled",0!==e),o.default("ul.controls .inline-child-move-down",this).toggleClass("disabled",e===n.length-1).toggleClass("enabled",e!==n.length-1)}))}},t.updateAddButtonState=function(){if(e.maxForms){var n=o.default("> [data-inline-panel-child]",t.formsUl).not(".deleted"),a=o.default("#"+e.formsetPrefix+"-ADD");n.length>=e.maxForms?a.addClass("disabled"):a.removeClass("disabled")}},t.animateSwap=function(e,n){var a=t.formsUl,i=a.children("li:not(.deleted)");a.addClass("moving").css("height",a.height()),i.each((function(){o.default(this).css("top",o.default(this).position().top)})).addClass("moving"),e.animate({top:n.position().top},200,(function(){a.removeClass("moving").removeAttr("style"),i.removeClass("moving").removeAttr("style")})),n.animate({top:e.position().top},200,(function(){a.removeClass("moving").removeAttr("style"),i.removeClass("moving").removeAttr("style")}))},buildExpandingFormset(e.formsetPrefix,{onAdd:function(n){var a=e.emptyChildFormPrefix.replace(/__prefix__/g,n);t.initChildControls(a),e.canOrder&&o.default("#id_"+a+"-ORDER").val(n+1),t.updateMoveButtonDisabledStates(),t.updateAddButtonState(),e.onAdd&&e.onAdd()}}),t},window.cleanForSlug=i,window.initSlugAutoPopulate=l,window.initSlugCleaning=r,window.initErrorDetection=d,window.initCollapsibleBlocks=s,window.initKeyboardShortcuts=u,o.default((function(){o.default("body").hasClass("page-is-live")||l(),r(),d(),s(),u();var e=o.default(".action-preview"),t=o.default("#page-edit-form"),n=e.data("action"),a=-1;function i(){return o.default.ajax({url:n,method:"POST",data:new FormData(t[0]),processData:!1,contentType:!1})}e.one("click",(function(){e.data("auto-update")&&t.on("change keyup DOMSubtreeModified",(function(){clearTimeout(a),a=setTimeout(i,1e3)})).trigger("change")})),e.on("click",(function(e){e.preventDefault();var n=o.default(this),a=n.filter(".icon"),l=n.data("action");a.addClass("icon-spinner").removeClass("icon-view");var r=window.open("",l);r.focus(),i().done((function(e){e.is_valid?r.document.location=l:(window.focus(),r.close(),t.trigger("submit"))})).fail((function(){alert("Error while sending preview data."),window.focus(),r.close()})).always((function(){a.addClass("icon-view").removeClass("icon-spinner")}))}))})),e.exports&&(e.exports.cleanForSlug=i)},73609:function(e){e.exports=jQuery}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=function(t,n,o,i){if(!n){var l=1/0;for(s=0;s<e.length;s++){n=e[s][0],o=e[s][1],i=e[s][2];for(var r=!0,d=0;d<n.length;d++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[d])}))?n.splice(d--,1):(r=!1,i<l&&(l=i));r&&(e.splice(s--,1),t=o())}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,o,i]},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={607:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,l=n[0],r=n[1],d=n[2],s=0;for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(d)var u=d(a);for(t&&t(n);s<l.length;s++)i=l[s],a.o(e,i)&&e[i]&&e[i][0](),e[l[s]]=0;return a.O(u)},n=self.webpackChunkwagtail=self.webpackChunkwagtail||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.O(void 0,[751],(function(){return a(85843)}));var o=a.O(void 0,[751],(function(){return a(90971)}));o=a.O(o)}();
//# sourceMappingURL=page-editor.js.map